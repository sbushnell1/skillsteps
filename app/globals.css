:root{
  --brand:#8f79dd; --side:#7f6acc; --ink:#111827; --muted:#6b7280;
  --chip:#d7e3f6; --card:#d7e3f6; --bg:#fff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--ink);background:var(--bg);}

/* Top bar + shell */
.brandBar{background:var(--brand);color:#fff;padding:12px 24px;display:flex;align-items:center;justify-content:center;font-weight:800}
.shell{display:flex;min-height:calc(100dvh - 48px)}
.main{flex:1;padding:24px;max-width:1200px;margin:0 auto}

/* Sidebar */
.sidebar{width:260px;background:var(--side);color:#fff;padding:20px 16px;transition:width .2s ease}
.sidebar.min{width:84px}
.title{font-weight:800;margin-bottom:10px}
.toggle{cursor:pointer;background:rgba(0,0,0,.18);width:40px;height:40px;border-radius:10px;display:grid;place-items:center;border:none}
.nav{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.nav-item{color:#fff;text-decoration:none;padding:10px 12px;border-radius:12px}
.nav-item:hover{background:rgba(255,255,255,.18)}
.ss-active{background:rgba(255,255,255,.25)!important}
.icon{width:26px;height:26px;display:grid;place-items:center}

/* Learn page */
.h1{font-size:clamp(24px,2.4vw + 12px,36px);font-weight:800;margin:6px 0 14px}
.sub{color:var(--muted);margin-bottom:18px}
.subject-grid{--min:160px;display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--min),1fr));gap:24px;max-width:900px}
.subject-card{position:relative;background:#fff;border-radius:22px;border:1px solid #e5e7eb;padding:16px;text-decoration:none;color:inherit;display:flex;align-items:center;justify-content:center;aspect-ratio:1/1;box-shadow:0 1px 2px rgba(16,24,40,.05);transition:transform .06s ease,box-shadow .12s ease}
.subject-card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(16,24,40,.12)}
.subject-card:focus-visible{outline:3px solid #8f79dd;outline-offset:2px}
.subject-inner{display:flex;flex-direction:column;align-items:center;gap:10px}
.subject-label{font-weight:800}

/* Narrow screens: auto-min sidebar */
@media (max-width:900px){.sidebar{width:84px!important}}

/* replace your .skill-grid / .skill-card block with this */
.skill-grid {
  --min:160px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(var(--min),1fr));
  gap:22px;
  max-width:900px;
}

.skill-card{
  width:170px;             /* consistent size */
  aspect-ratio:1/1;
  background:var(--accent);
  border-radius:22px;
  border:1px solid #e5e7eb;
  padding:14px;
  text-decoration:none;
  color:inherit;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 1px 2px rgba(16,24,40,.05);
  transition:transform .06s ease, box-shadow .12s ease, filter .12s ease;
}

.skill-card:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 16px rgba(16,24,40,.12);
  filter:saturate(1.03);
}

.skill-card:focus-visible{
  outline:3px solid #8f79dd;
  outline-offset:2px;
}

.skill-inner{display:flex;flex-direction:column;align-items:center;gap:10px}
.skill-label{font-weight:800; font-size:18px; text-align:center}

@media (max-width:560px){
  .skill-card{ width:150px; }
}

/* === Skill hub (subject/skill page) === */
.skill-hub{
  /* derives soft tints from subject colour */
  --pill-bg: color-mix(in srgb, var(--accent) 35%, #ffffff);
  --tile-bg: color-mix(in srgb, var(--accent) 25%, #ffffff);
  --tile-bg-hover: color-mix(in srgb, var(--accent) 35%, #ffffff);
  --tile-border: color-mix(in srgb, var(--accent) 55%, #ffffff);
  --tile-text:#0d1b2a;
}

.pill-wrap{display:grid;place-items:center;margin:12px 0 24px}
.topic-pill{
  background:var(--pill-bg);
  padding:10px 22px;
  border-radius:999px;
  font-weight:800;
  box-shadow:0 1px 0 rgba(0,0,0,.04) inset, 0 1px 2px rgba(0,0,0,.06);
}

.tile-grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(220px,1fr));
  gap:18px;
  max-width:1100px;
}
@media (max-width:1100px){ .tile-grid{ grid-template-columns:repeat(2,minmax(220px,1fr)); } }
@media (max-width:640px){ .tile-grid{ grid-template-columns:1fr; } }

.tile{
  display:flex;flex-direction:column;justify-content:space-between;gap:8px;
  border-radius:20px;padding:22px;
  background:var(--tile-bg);
  border:1px solid var(--tile-border);
  text-decoration:none;color:var(--tile-text);
  min-height:180px;
  box-shadow:0 1px 2px rgba(16,24,40,.05);
  transition:transform .06s ease,background .15s ease,box-shadow .15s ease;
}
.tile:hover{
  background:var(--tile-bg-hover);
  transform:translateY(-2px);
  box-shadow:0 6px 16px rgba(16,24,40,.12);
}
.tile[aria-disabled="true"]{cursor:not-allowed}

.tile-title{font-weight:800;font-size:1.35rem;line-height:1.2}
.tile-sub{font-size:1.05rem;opacity:.9}

/* Weakness box */
.weakness-card{
  margin-top:28px;background:#fff;border:1px solid var(--tile-border);
  border-radius:16px;padding:18px 20px;box-shadow:0 4px 18px rgba(0,0,0,.04);
  max-width:1100px;
}
.weakness-card h2{margin:0 0 8px 0;font-size:1.1rem;font-weight:800}
.weakness-card p{margin:0;color:#2d3648;line-height:1.5}

/* Center content inside the option tiles */
.tile{
  align-items:center;          /* centers horizontally */
  text-align:center;           /* centers text */
}

.tile-title{ text-align:center; }
.tile-sub{ text-align:center; }

/* spacing tweak since weaknesses moved up */
.weakness-card{ margin: 18px 0 24px; }

/* Make the topic pill look/feel clickable */
.topic-pill-link{
  cursor:pointer;
  color:inherit;
  text-decoration:none;
  outline: none;
}
.topic-pill-link:hover{ filter:saturate(1.05); box-shadow:0 2px 10px rgba(0,0,0,.07); }
.topic-pill-link:focus-visible{ outline:3px solid var(--brand); outline-offset:3px; }

/* Tile icons (centered between title and subtext) */
.tile { align-items:center; text-align:center; }
.tile-title{ text-align:center; }
.tile-sub{ text-align:center; }

.tile-icon{
  width:52px;
  height:52px;
  margin:8px 0 6px;
  stroke-linecap:round;
  stroke-linejoin:round;
  opacity:.9;
}

/* === Dive Deeper chat === */
.chat-card{
  background:#fff;
  border:1px solid color-mix(in srgb, var(--accent) 55%, #ffffff);
  border-radius:18px;
  padding:16px;
  box-shadow:0 4px 18px rgba(0,0,0,.04);
  max-width:900px;
  margin-inline:auto;
}

.chat-scope{
  display:flex; gap:10px; align-items:center; justify-content:space-between;
  font-size:.95rem; color:var(--muted); margin-bottom:10px;
}
.scope-dot{ width:8px; height:8px; border-radius:50%; background:var(--brand); display:inline-block; }
.scope-link{ color:var(--brand); text-decoration:none; }
.scope-link:hover{ text-decoration:underline; }

.chip-row{ display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 12px; }
.chip{
  background: color-mix(in srgb, var(--accent) 25%, #ffffff);
  border:1px solid color-mix(in srgb, var(--accent) 55%, #ffffff);
  border-radius:999px; padding:8px 12px; font-size:.9rem; cursor:pointer;
}
.chip:hover{ transform:translateY(-1px); box-shadow:0 6px 16px rgba(16,24,40,.12); }
.chip:disabled{ opacity:.6; cursor:not-allowed; }

.chat-scroll{
  max-height:55vh; overflow:auto; padding:6px; background: #fafafa; border-radius:12px; border:1px solid #eee;
}

.bubble{
  display:flex; margin:10px 0;
}
.bubble-user{ justify-content:flex-end; }
.bubble-assistant{ justify-content:flex-start; }

.bubble-inner{
  max-width:min(70ch, 100%);
  padding:12px 14px; border-radius:16px; line-height:1.5;
  background:#e9efff;
}
.bubble-user .bubble-inner{ background:#e6f7ea; }
.bubble-assistant .bubble-inner code{
  background:#fff; border:1px solid #e5e7eb; border-radius:6px; padding:1px 4px;
}

.typing{ margin:10px; font-size:.9rem; color:var(--muted); }

.composer{
  display:flex; gap:8px; margin-top:12px;
}
.composer-input{
  flex:1; padding:12px 14px; border-radius:12px; border:1px solid #e5e7eb;
}
.composer-input:focus{ outline:3px solid #8f79dd22; border-color:#8f79dd44; }
.composer-btn{
  padding:12px 16px; border-radius:12px; border:none; background:var(--brand); color:#fff; font-weight:700; cursor:pointer;
}
.composer-btn:disabled{ opacity:.7; cursor:not-allowed; }

